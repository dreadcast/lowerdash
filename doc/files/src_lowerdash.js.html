<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/lowerdash.js - Lowerdash API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="Lowerdash API" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.3.2</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Lowerdash.html">Lowerdash</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/Lodash.html">Lodash</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src/lowerdash.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
;(function(root){
	/**
	 * Useful mixins for Lodash
	 * @Class Lowerdash
	 * @Module Lodash
	 * @static
	 */
	if(typeof require == &#x27;function&#x27;){
		var _ = require(&#x27;lodash&#x27;).runInContext();		
		
		if(typeof exports !== &#x27;undefined&#x27; &amp;&amp; typeof module !== &#x27;undefined&#x27; &amp;&amp; module.exports)
			module.exports = _;
	
	} else {
		var _ = root._;
	}
	
	/**
	 *	Creates an array containing passed argument or return argument if it is already an array.
	 *	@method from
	 *	@return {Array}				Created or existing array
	 */
	function from(arg){
		if(!_.isArray(arg) &amp;&amp; !_.isArguments(arg))
			arg = [arg];
		
		return _.toArray(arg);
	}
	
	/**
	 *	Returns penultimate item from an array or null if array contains less than 2 items
	 *	@method penultimate
	 *	@param {Object} obj			Object or array to get penultimate item from
	 *	@return {Mixed}				Penultimate item from provided array
	 */
	function penultimate(obj){
		return obj.length &gt; 1 ? obj[obj.length - 2] : null;
	}
	
	/**
	 *	Joins items from an array with a different glue before last item
	 *	@method joinLast
	 *	@param {Array} obj			Array to join
	 *	@param {String} glue		Items delimiter
	 *	@param {String} stick		Delimiter before last item
	 *	@return {String}			Joined array
	 */
	function joinLast(obj, glue, stick){
		if(_.size(obj) == 1)
			return obj[0];
			
		var last = obj.pop();
		
		return obj.join(glue) + stick + last;
	}
	/**
	 *	Get property from object following provided path 
	 *	@method getFromPath
	 *	@param {Object} obj			Object to get property from
	 *	@param {String} path		Path to property (Dot-delimited)
	 *	@return {Mixed}				Property
	 */
	function getFromPath(obj, path){
		path = path.split(&#x27;.&#x27;);

		for(var i = 0, l = path.length; i &lt; l; i++){
			if (hasOwnProperty.call(obj, path[i]))
				obj = obj[path[i]];
			
			else
				return undefined;
		}
		
		return obj;
	}
	
	/**
	 *	Set property of object following provided path 
	 *	@method setFromPath
	 *	@param {Object} obj			Destination object
	 *	@param {String} path		Path to property
	 *	@param {Mixed} value		Property value
	 *	@return {Object}			Object
	 */
	function setFromPath(obj, path, value){
		var parts = path.split(&#x27;.&#x27;);
		
		for(var i = 0, l = parts.length; i &lt; l; i++){
			if(i &lt; (l - 1) &amp;&amp; !obj.hasOwnProperty(parts[i]))
				obj[parts[i]] = {};
	
			if(i == l - 1)
				obj[parts[i]] = value;
			
			else
				obj = obj[parts[i]];
		}
		
		return obj;
	}
	
	/**
	 *	Removes property of object following provided path 
	 *	@method eraseFromPath
	 *	@param {Object} obj			Object to remove property from
	 *	@param {String} path		Path to property
	 *	@return {Object}			Object
	 */
	function eraseFromPath(obj, path){
		var parts = path.split(&#x27;.&#x27;),
			clone = obj;
		
		for(var i = 0, l = parts.length; i &lt; l; i++){
			if (!obj.hasOwnProperty(parts[i])){
				break;
			
			} else if (i &lt; l - 1){
				obj = obj[parts[i]];
				
			} else if(i == l - 1){
				delete obj[parts[i]];
				break;
			}
		}
		
		return clone;
	}
	
	/**
	 *	Retrieve object&#x27;s key paired to given property 
	 *	@method keyOf
	 *	@param {Object} obj			Object to get key from
	 *	@param {Mixed} value		Value corresponding to key
	 *	@return {String}			Key or null if no key was found
	 */
	function keyOf(obj, value){
		for(var key in obj)
			if(Object.prototype.hasOwnProperty.call(obj, key) &amp;&amp; obj[key] === value)
				return key;

		return null;
	}
	
	/**
	 *	Lax isEqual, arrays are sorted and unique&#x27;d
	 *	@method isLaxEqual
	 *	@param {Mixed} a			Value to compare
	 *	@param {Mixed} b			Value to be compared
	 *	@return {Boolean}			Lax equality
	 */
	function isLaxEqual(a, b){
		if(_.isArray(a))
			a = _.uniq(a.sort());
			
		if(_.isArray(b))
			b = _.uniq(b.sort());
		
		return _.isEqual(a, b);
	}
	
	/*
	 *	Checks if passed argument is an iterable object, not an array or a function
	 *	@method isIterable
	 *	@param {Mixed} was			Object to be checked
	 *	@return {Boolean}			was is iterable
	 */
	function isIterable(was){
		return _.isObject(was) &amp;&amp; !_.isFunction(was) &amp;&amp; !_.isArray(was);
	}
	
	/*
	 *	Checks if passed string is a JSON encoded object
	 *	@method isJson
	 *	@param {String} was			String that must test the JSON validity
	 *	@return {Boolean}			was is a valid JSON
	 */
	function isJson(was){
		try{
			return _.isString(was) &amp;&amp; _.isObject(JSON.parse(was));
		} catch(e){
			return false;
		}
	}
	
	/*
	 *	Checks if passed argument is shit (&lt;code&gt;null, &#x27;null&#x27;, undefined, &#x27;&#x27;, false, &#x27;false&#x27;, 0, &#x27;0&#x27;&lt;/code&gt;)
	 *	@method isShit
	 *	@param {Mixed} was			Object to test shitiness
	 *	@return {Boolean}			was is shit
	 */
	function isShit(was){
		if(_.isArray(was) &amp;&amp; _compact(was).length == 0)
			return true;
		
		return _.contains([null, &#x27;null&#x27;, undefined, &#x27;&#x27;, false, &#x27;false&#x27;, 0, &#x27;0&#x27;], was);
	}
	
	/**
	 *	Wait &lt;code&gt;next&lt;/code&gt; cursor to be called before next iteration
	 *	@method eachAsync
	 *	@param {Object} obj			Object or array.
	 *	@param {Function} iterator	Iterator, invoked on each entry.
	 *								Passed arguments are &lt;code&gt;item&lt;/code&gt;, &lt;code&gt;key&lt;/code&gt; (if passed obj is iterable),
	 								&lt;code&gt;index&lt;/code&gt;, &lt;code&gt;cursor&lt;/code&gt; and passed &lt;code&gt;arr&lt;/code&gt;.
	 *	@param {Function} [cb]		Callback invoked after last iteration.
	 *	@param {Object} [bind]	 	Object bound to iterator, default to passed &lt;code&gt;arr&lt;/code&gt;.
	 *	@return {Object} arr		Passed object
	 *	@example
	 *		_.eachAsync([1, 2, 3, 4], function(item, index, cursor, ar){
	 *			new Request({
	 *				url: &#x27;/rest/&#x27; + index,
	 *				onSuccess: function(){
	 *					console.info(&#x27;item #&#x27; + index + &#x27; posted&#x27;);
	 *					cursor();
	 *				}
	 *			}).post();
	 *		}, function(){ console.info(&#x27;complete&#x27;); })
	 *
	 *		// Works with an array of functions...
	 *		_.eachAsync([function(cursor){
	 *			new Request({
	 *				url: &#x27;/some/url/123&#x27;,
	 *				onSuccess: cursor
	 *			}).get();
	 *		}, function(cursor){
	 *			new Request({
	 *				url: &#x27;/some/url/456&#x27;,
	 *				onSuccess: cursor
	 *			}).get();
	 *		}], function(item, index, cursor, ar){
	 *			item(cursor);
	 *		});
	 */
	
	function eachAsync(obj, iterator, cb, bind){
		if(_.size(obj) == 0)
			return cb.call(bind);
		
		var i = 0,
			hasKeys = _.isIterable(obj),
			values = hasKeys ? _.pairs(obj) : obj,
			size = _.size(values);

		function loop(){
			var cursor;
			
			if(i &gt;= size)
				cursor = function(){};

			else if(i == size - 1 &amp;&amp; _.isFunction(cb))
				cursor = function(){
					cb.call(bind);
					loop();
				};
				
			else if(i &lt; size)
				cursor = function(){
					loop();
				};
			
			if(i &lt; size){	
				if(hasKeys)
					iterator.call(bind, values[i][1], values[i][0], cursor, obj);	
				
				else			
					iterator.call(bind, values[i], i, cursor, obj);	
			}
			
			i++;
		};
			
		loop();
		
		return obj;
	}
	
	/**
	 *	Invoke passed iterator on each passed array entry
	 *	All iterations are concurrents
	 *	@method eachParallel
	 *	@param {Object} obj			Object or array.
	 *	@param {Function} iterator	Iterator, invoked on each obj entry.
	 *								Passed arguments are &lt;code&gt;item&lt;/code&gt;, &lt;code&gt;index&lt;/code&gt; or
	 								&lt;code&gt;key&lt;/code&gt; (if passed object is iterable),
	 								&lt;code&gt;cursor&lt;/code&gt; and passed &lt;code&gt;arr&lt;/code&gt;.
	 *	@param {Function} [cb]		Callback invoked when last iteration is done.
	 *	@param {Number} [max]		Amount of concurrent tasks.
	 *	@param {Object} [bind]	 	Object bound to iterator, default to passed &lt;code&gt;arr&lt;/code&gt;.
	 */
	function eachParallel(obj, iterator, cb, max, bind){
		if(!_.isFinite(max))
			max = _.size(obj);
						
		var stepsToGo = _.size(obj),
			chunks = _.isIterable(obj) ? _.norris(obj, max) : _.chunk(obj, max);
		
		_.eachAsync(chunks, function(chunk, chunkKey, chunkCursor){
			var chunkIndex = 0;
			
			_.each(chunk, function(item, key){
				function cursor(){
					stepsToGo--;
					
					if(chunkIndex + 1 == max || stepsToGo == 0)
						chunkCursor();
						
					chunkIndex++;
				};
			
				iterator.call(bind, item, key, cursor, obj);
			});
		}, cb, bind);
		
		return obj;
	}
	
	/**
	 *	Wait &lt;code&gt;next&lt;/code&gt; n ms to call next iteration. Alias: eachInterval
	 *	@method eachDelayed
	 *	@param {Object} obj			Object or array.
	 *	@param {Function} iterator	Iterator, invoked on each entry.
	 *								Passed arguments are &lt;code&gt;item&lt;/code&gt;, &lt;code&gt;key&lt;/code&gt; (if passed object is iterable),
	 								&lt;code&gt;index&lt;/code&gt;, &lt;code&gt;cursor&lt;/code&gt; and passed &lt;code&gt;arr&lt;/code&gt;.
	 *	@param {Function} [cb]		Callback invoked after last iteration.
	 *	@param {Function} [delay]	Delay between each iteration.
	 *	@param {Object} [bind]	 	Object bound to iterator, default to passed &lt;code&gt;arr&lt;/code&gt;.
	 *	@return {Object} arr		Passed object
	 *	@alias	eachInterval
	 */
	function eachDelayed(arr, iterator, cb, delay, bind){
		return _.eachAsync(arr, function(){
			setTimeout(function(){
				iterator.apply(this, arguments);
			}.bind(bind || this), delay);
		}, cb, bind);
	}
	
	/**
	 *	Chunks a plain object
	 *	Lodash cannot have chunk() without norris()
	 *	@method norris
	 *	@param {Object} obj			Object.
	 *	@param {Number} chunkSize	Chunk size.
	 *	@return {Array}			 	Chunked object.
	 */
	function norris(obj, chunkSize){
		return _.chain(obj)
			.pairs()
			.chunk(chunkSize)
			.map(function(pairs){
				var chunkedObj = {};
				
				_.each(pairs, function(pair){
					chunkedObj[pair[0]] = pair[1];
				});
				
				return chunkedObj;
			})
			.value();
	}
	
	/**
	 *	Find value closest to given number in an array of numbers 
	 *	@method closest
	 *	@return {Number}			Closest value
	 */
	function closest(obj, number){		
		if((current = obj.length) &lt; 2)
			return l - 1;
			
		for(var current, previous = Math.abs(obj[--current] - number); current--;)
			if(previous &lt; (previous = Math.abs(obj[current] - number)))
				break;
				
		return obj[current + 1];
	
		var closest = -1,
			prev = Math.abs(obj[0] - number);
		
		for (var i = 1; i &lt; obj.length; i++){
			var diff = Math.abs(obj[i] - number);
			
			if (diff &lt;= prev){
				prev = diff;
				closest = obj[i];
			}
		}
		
		return closest;
	}

	/**
	 *	Replace item at index i with given item
	 *	@method replaceAt
	 *	@return {Array}				Array instance
	 */
	function replaceAt(arr, item, i){
		arr.splice(i, 1, item);
		
		return arr;
	}
	
	/**
	 *	Insert item at index i
	 *	@method insertAt
	 *	@return {Array}				Array instance
	 */
	function insertAt(arr, item, i){
		arr.splice(i, 0, item);
		
		return arr;
	}
	
	/**
	 *	Attempts to execute function, return false if fails
	 *	@method attempt
	 *	@param {Function} fn		Function to execute
	 *	@param {Mixed} arguments*	Arguments to pass to function
	 *	@return {Mixed} 			Function result or false
	 */
	function attempt(fn){
		try {
			var args = _.from(arguments);
			args.shift();
			
			return fn.apply(this, args);
		} catch(e){
			return false;
		}
	}

	_.mixin({
		// Utils
		isLaxEqual: isLaxEqual,
		isIterable: isIterable,
		isJson: isJson,
		isShit: isShit,
	
		// Iterate
		eachAsync: eachAsync,
		eachParallel: eachParallel,
		eachDelayed: eachDelayed,
		eachInterval: eachDelayed,
		
		// Object
		getFromPath: getFromPath,
		setFromPath: setFromPath,
		eraseFromPath: eraseFromPath,
		keyOf: keyOf,
		norris: norris,
		

		// Array
		from: from,
		penultimate: penultimate,
		joinLast: joinLast,
		gluten: joinLast,
		closest: closest,
		replaceAt: replaceAt,
		insertAt: insertAt,
		
		// Function
		attempt: attempt
	});
	
})(Function(&#x27;return this&#x27;)());
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
